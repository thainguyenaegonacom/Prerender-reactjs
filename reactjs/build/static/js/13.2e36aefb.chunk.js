(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13,17],{253:function(e,t,n){"use strict";t.a=n.p+"static/media/addToCart-white.47327068.svg"},267:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(5),s=n(29),l=n(14),r=n(10),o=n(17),d=n(1),u=n.p+"static/media/logo.d1cd0572.png",j=n(6),b=n(11),v=n(258),O=n.n(v),h=(n(290),n(97)),m=n(253),f=n(64),x=n(19),p=n(18),g=n(43),N=n(20),w=n(55),y=n(0);var k=function(e){var t,n=e.productItem,c=Object(x.d)((function(e){return e.productReducer})),a=Object(d.useRef)(null),l=Object(d.useState)({}),o=Object(r.a)(l,2),u=o[0],j=o[1],v=Object(x.c)(),O=(null===n||void 0===n?void 0:n.value)?null===n||void 0===n?void 0:n.value:n,h=Object(N.g)();return Object(d.useEffect)((function(){if(a&&a.current){var e,t=a.current.clientHeight,n=a.current.clientHeight;j(Object(i.a)(Object(i.a)({},null===(e=O.images[0])||void 0===e?void 0:e.url),{},{width:t,height:n}))}}),[O,a]),Object(y.jsxs)("div",{className:"product-item-box",children:[Object(y.jsxs)("div",{className:"favorite-box",children:[Object(y.jsx)("div",{}),O.fixed_rebate?Object(y.jsx)("span",{className:"sale-inf",style:{visibility:O.fixed_rebate>0?"visible":"hidden"},children:O.fixed_rebate>0?"-".concat(O.fixed_rebate,"%"):""}):""]}),Object(y.jsx)("div",{className:"img-product",ref:a,children:Object(y.jsx)(f.default,{data:u})}),Object(y.jsxs)("div",{className:"bot",children:[Object(y.jsx)("div",{className:"row",children:Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("p",{className:"title-item",children:null===(t=O.brand)||void 0===t?void 0:t.name}),Object(y.jsx)("p",{className:"title-info",children:null===O||void 0===O?void 0:O.name})]})}),Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:" info",children:Object(y.jsx)("span",{className:"money ".concat(n.sale?"sale-price":""),children:Object(b.l)(null===O||void 0===O?void 0:O.product_variants[0].price)})})}),Object(y.jsx)("button",{className:"btn-detail",onClick:function(){var e,t,n,c;n=O.handle,c=null===O||void 0===O||null===(e=O.brand_page)||void 0===e||null===(t=e.page_ptr)||void 0===t?void 0:t.handle,h.push("/brand/"+c+"/"+n)},children:"Discover"}),Object(y.jsxs)("button",{className:"btn-add",onClick:function(e){var t;e.stopPropagation();var n=(null===O||void 0===O?void 0:O.product_variants[0])||{},a={variant_id:null!==(t=null===n||void 0===n?void 0:n.variant_id)&&void 0!==t?t:"",quantity:1},l=null===c||void 0===c?void 0:c.lineItems.findIndex((function(e){return e.variant_id==a.variant_id})),r=Object(s.a)(null===c||void 0===c?void 0:c.lineItems);if(-1!=l){var o={variant_id:a.variant_id,quantity:(null===c||void 0===c?void 0:c.lineItems[l].quantity)+a.quantity};r[l]=o}else r.push(a);Object(w.a)(Object(i.a)(Object(i.a)({},O),{},{variant_id:n.variant_id,price:null===n||void 0===n?void 0:n.price,title:null===n||void 0===n?void 0:n.title,quantity:1})),v(p.a(r)),v(g.c(!0))},children:["ADD TO BAG",Object(y.jsx)("img",{src:m.a,alt:"ic-add-to-cart"})]})]})]})},_=n(28);function q(e){var t=e.productList,n=e.title,c=e.subTitle,a=Object(d.useState)(0),i=Object(r.a)(a,2),s=i[0],l=i[1],u=function(e){"next"!=e?"prev"!=e||l(s-1<=0?0:s-1):l(s+1>=t.length?t.length-1:s+1)};return Object(y.jsx)("section",{className:"blk-questionnaire-product",children:Object(y.jsxs)("div",{className:"container",children:[n?Object(y.jsx)("h3",{className:"title-block",children:n}):"",c?Object(y.jsx)("p",{className:"sub-title-block",children:c}):"",Object(y.jsx)("div",{className:"line-center"}),Object(y.jsx)("div",{className:"".concat(_.a?"":"row"," list-product"),children:_.a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.a,{selected:s,fillParent:!1,mobileTouch:!0,buttons:!1,bullets:!0,className:"animation-slider",onTransitionEnd:function(e){l(e.currentIndex)},children:Object(o.map)(t,(function(e,t){return Object(y.jsx)("div",{className:"animated fasted fade-in",style:{marginBottom:16},children:Object(y.jsx)(k,{productItem:e})},t)}))}),Object(y.jsxs)("div",{className:"group-button",children:[Object(y.jsx)("button",{className:"next ".concat(s==t.length-1?"btn-end":""),onClick:function(){u("next")},children:Object(y.jsx)("span",{className:"material-icons",children:"navigate_next"})}),Object(y.jsx)("button",{className:"prev ".concat(0==s?"btn-end":""),onClick:function(){u("prev")},children:Object(y.jsx)("span",{className:"material-icons",children:"navigate_next"})})]})]}):Object(y.jsx)(y.Fragment,{children:Object(o.map)(t,(function(e,t){return Object(y.jsx)("div",{className:"col-lg-3 col-md-4 col-6 animated fasted fade-in",style:{marginBottom:16},children:Object(y.jsx)(k,{productItem:e})},t)}))})})]})})}var I=Object(d.memo)(q),S=n.p+"static/media/left-arrow.3c5c1c94.svg",T=n.p+"static/media/home.9bf8126f.svg",C=n(21);function E(e){var t,n=e.data,c=Object(d.useState)([]),v=Object(r.a)(c,2),m=v[0],f=v[1],x=Object(d.useState)([]),p=Object(r.a)(x,2),g=p[0],N=p[1],w=Object(d.useState)(0),k=Object(r.a)(w,2),q=k[0],E=k[1],K=Object(d.useState)({questionIndex:null,answerKey:null}),A=Object(r.a)(K,2),B=A[0],P=A[1],R=Object(d.useState)(!1),D=Object(r.a)(R,2),H=D[0],F=D[1],G=Object(d.useState)(!1),J=Object(r.a)(G,2),L=J[0],Q=J[1],z=Object(d.useState)([]),M=Object(r.a)(z,2),U=M[0],Z=M[1],V=Object(d.useState)(!1),W=Object(r.a)(V,2),X=W[0],Y=W[1],$=Object(d.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=function(){var e=Object(l.a)(a.a.mark((function e(){var t,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(o.isEmpty)(m)){e.next=11;break}return t={url:"".concat(j.o).concat(null===n||void 0===n?void 0:n.value),method:"GET",body:null},e.prev=2,e.next=5,Object(b.e)(t);case 5:(c=e.sent).length>0&&(f(c),N([].concat(Object(s.a)(g),[Object(i.a)({},c[0])]))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){if(X||U.length>0)return Z([]),N([Object(i.a)({},m[0])]),E(0),void Y(!1);if(q>0){var e=Object(s.a)(g);e.pop(),N(e)}E(0==q?0:q-1),Q(!0)},ie=function(){var e=Object(l.a)(a.a.mark((function e(){var t,n,c,i,s,l,r,o,d,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=g[g.length-1],r=l,(null===l||void 0===l?void 0:l.children)&&(null===l||void 0===l?void 0:l.children.length)>0&&(r=l.children.find((function(e){return e.data.parent_answer=="answer_".concat(B.answerKey)}))),o={questionnaire_id:null===(t=r)||void 0===t?void 0:t.id,collections:null===(n=r)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.collection,scents:null===(i=r)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.scent},d={url:"".concat(j.o),method:"POST",body:o},e.prev=5,e.next=8,Object(b.e)(d);case 8:u=e.sent,Z(u.products),F(!1),0==u.products.length&&Y(!0),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){ce()}),[]),Object(d.useEffect)((function(){H&&ie()}),[H]),Object(d.useEffect)((function(){!function(){if(null!=B.questionIndex){var e=g.find((function(e,t){return t==B.questionIndex}));if(!te&&e&&e.children){var t=e.children.find((function(e){return e.data.parent_answer=="answer_".concat(B.answerKey)}));if(t){if(L){var n=g.slice(0,B.questionIndex+1);N([].concat(Object(s.a)(n),[Object(i.a)({},t)])),E(n.length),Q(!1)}else N([].concat(Object(s.a)(g),[Object(i.a)({},t)])),E(g.length);P(Object(i.a)(Object(i.a)({},B),{},{questionIndex:null,answerKey:null}))}else F(!0)}else F(!0)}}()}),[B]),Object(y.jsxs)("div",{className:"site-questionnaire",style:{backgroundImage:"url('".concat(null===n||void 0===n||null===(t=n.background)||void 0===t?void 0:t.webp,"')"),backgroundSize:"cover"},children:[H?Object(y.jsx)(h.a,{}):"",Object(y.jsxs)("div",{className:"container ".concat(U.length>0?"opacity-none":""),children:[Object(y.jsxs)("button",{className:"btn-back",onClick:ae,children:[Object(y.jsx)("img",{className:"ic-back",src:S,alt:"ic-back"}),Object(y.jsx)("span",{children:X||U.length>0?"RESTART QUIZ":"BACK"})]}),Object(y.jsxs)(C.b,{className:"btn-home",to:"/",children:[Object(y.jsx)("img",{className:"ic-home",src:T,alt:"ic-home"}),Object(y.jsx)("br",{}),Object(y.jsx)("span",{children:"HOME"})]}),Object(y.jsx)("div",{className:"logo",children:Object(y.jsx)("img",{src:u,width:130,height:"auto",alt:"sundora-logo"})}),X?Object(y.jsx)("div",{className:"product-not-exists",children:Object(y.jsxs)("h2",{children:["There is no suitable product for you,"," ",Object(y.jsx)("span",{onClick:ae,children:"please try again"}),"."]})}):U.length>0?Object(y.jsx)(I,{productList:U,title:"Top products for you:",subTitle:"Based on your answers here it what we recommend"}):Object(y.jsxs)("div",{className:"question",children:[Object(y.jsxs)("h2",{className:"text-question-step",children:["Question ",q+1," / 6"]}),Object(y.jsx)(O.a,{selected:q,fillParent:!1,mobileTouch:!1,bullets:!1,className:"animation-slider",buttons:!1,children:g.map((function(e,t){return Object(y.jsxs)("div",{className:"detail-question",children:[Object(y.jsx)("h1",{className:"text-question-name",children:e.data.question}),Object(y.jsx)("div",{className:"line-center"}),Object(y.jsx)("div",{className:"row",style:{padding:_.a?20:13},children:[1,2,3,4].map((function(n){return Object(y.jsx)("button",{onClick:function(){!function(e,t){ne(5==e),P(Object(i.a)(Object(i.a)({},B),{},{questionIndex:e,answerKey:t}))}(t,n)},className:"".concat(_.a?"col-12":"col"," block-answer ").concat(B.answerKey==n?"block-answer-active":""," ").concat(""!=e.data["answer_".concat(n)]?"":"d-none"),children:Object(y.jsx)("p",{children:e.data["answer_".concat(n)]})},n)}))})]},t)}))}),Object(y.jsx)("div",{className:"group-dot",children:Array.from(Array(6).keys()).map((function(e,t){return Object(y.jsx)("button",{className:"btn-dot".concat(t<g.length?" btn-dot-active":""),onClick:function(){return function(e){if(e<g.length&&e!=q){if(q>0){var t=Object(s.a)(g);N(t.slice(0,e+1))}E(e),Q(!0)}}(t)}},t)}))})]})]})]})}t.default=Object(d.memo)(E)}}]);
//# sourceMappingURL=13.2e36aefb.chunk.js.map