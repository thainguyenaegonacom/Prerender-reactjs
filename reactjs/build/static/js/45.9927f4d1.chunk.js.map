{"version":3,"sources":["containers/ReceiptPage/index.tsx"],"names":["ReceiptPage","useState","data","setData","id","useParams","fetchDataInit","a","isEmpty","options","url","GET_ORDER_HISTORY","method","body","pending","fetchClient","Promise","all","results","window","addEventListener","close","print","useEffect","totalQuantity","reduce","order","line_items","accumulator","currentValue","quantity","className","src","logo","width","alt","created_at","moment","utcOffset","format","order_number","user","first_name","last_name","company_name","phone","email","map","item","index","sku","name","price","moneyFormater","total_discount","style","paddingTop","subtotal_without_discount","current_total_discounts","discount_codes","length","amount","total_tax","total_shipping","parseFloat","current_total_price"],"mappings":"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","file":"static/js/45.9927f4d1.chunk.js","sourcesContent":["import { isEmpty, reduce, map } from 'lodash';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport logo from '../../images/icons/sundora-logo-vertical.png';\r\nimport './styles.scss';\r\nimport { GET_ORDER_HISTORY } from '../../config';\r\nimport { fetchClient, moneyFormater } from '../../redux/Helpers';\r\nimport moment from 'moment';\r\n\r\nfunction ReceiptPage(): JSX.Element {\r\n  const [data, setData] = useState<any>(null);\r\n  const { id } = useParams<any>();\r\n  const fetchDataInit = async () => {\r\n    if (isEmpty(data)) {\r\n      const options = {\r\n        url: `${GET_ORDER_HISTORY}${id}/`,\r\n        method: 'GET',\r\n        body: null,\r\n      };\r\n      // this.props.loadingPage(true);\r\n      const pending = [fetchClient(options)];\r\n      try {\r\n        const results = await Promise.all(pending);\r\n        const data = results[0];\r\n        setData(data?.data);\r\n        window.addEventListener('afterprint', () => {\r\n          window.close();\r\n        });\r\n        window.print();\r\n        // console.log(data.data);\r\n      } catch (error) {\r\n        // toastrError(error.message);\r\n        // this.props.loadingPage(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDataInit();\r\n  }, []);\r\n  const totalQuantity = reduce(\r\n    data?.order?.line_items,\r\n    (accumulator: any, currentValue: any) => accumulator + currentValue.quantity,\r\n    0,\r\n  );\r\n  // console.log(data);\r\n  return (\r\n    <section className=\"receipt\">\r\n      <div className=\"header-receipt\">\r\n        <img className=\"py-2\" src={logo} width=\"150\" alt=\"logo-sundora\" />\r\n        <p>Sundora</p>\r\n        <p>Banani 2 Outlet</p>\r\n        <p>House No #38, Road No#12, Block E, Banani-1212</p>\r\n        <p>01979793041</p>\r\n        <p>www.sundora.com.bd</p>\r\n        <p>BIN-002884759-0101</p>\r\n        <p>Musak 6.3</p>\r\n        {/* <p>VAT REG. No. : 002884759-0101</p> */}\r\n      </div>\r\n      <div className=\"inf-receipt\">\r\n        <p>\r\n          {data?.order && data?.order?.created_at\r\n            ? moment(data?.order?.created_at)\r\n                .utcOffset(data?.order?.created_at)\r\n                .format('DD-MM-yyyy hh:mm a')\r\n            : '-'}\r\n        </p>\r\n      </div>\r\n      <div className=\"inf-customer\">\r\n        <p>Order ID: #6{data?.order?.order_number}</p>\r\n        <p>\r\n          Customer: {data?.user?.first_name} {data?.user?.last_name}\r\n        </p>\r\n        <p>Company Name: {data?.company_name != null ? data?.company_name : '-'}</p>\r\n        <p>Phone Number: {data?.user?.phone || '-'}</p>\r\n        <p>E-Mail: {data?.user?.email || '-'}</p>\r\n      </div>\r\n      <div className=\"item-list\">\r\n        {/* <p className=\"title\">Item Name</p> */}\r\n        <div className=\"table\">\r\n          <table>\r\n            <tbody>\r\n              <tr className=\"tabletitle\">\r\n                <td className=\"title\">\r\n                  <p>Product ID / Item Name</p>\r\n                </td>\r\n                <td className=\"Hours text-right\">\r\n                  <p>Qty.</p>\r\n                </td>\r\n                <td className=\"item\">\r\n                  <p>Price</p>\r\n                </td>\r\n                <td className=\"Disc text-right\">\r\n                  <p>Discount</p>\r\n                </td>\r\n                <td className=\"Rate text-right\">\r\n                  <p>Total</p>\r\n                </td>\r\n              </tr>\r\n\r\n              {map(data?.order?.line_items, (item: any, index: any) => (\r\n                <tr className=\"service\" key={index}>\r\n                  <td className=\"tableitem nameProduct\">\r\n                    <p className=\"itemtex\">\r\n                      <span>{item?.sku} / </span>\r\n                      <span>{item?.name}</span>\r\n                    </p>\r\n                  </td>\r\n                  <td className=\"tableitem\">\r\n                    <p className=\"itemtext text-right\">{item?.quantity}</p>\r\n                  </td>\r\n                  <td className=\"tableitem\">\r\n                    <p className=\"price\">{item?.price ? moneyFormater(item?.price) : ''}</p>\r\n                  </td>\r\n                  <td className=\"tableitem\">\r\n                    <p className=\"itemtext text-right\">\r\n                      {item?.total_discount ? '-' + moneyFormater(item?.total_discount) : ''}\r\n                    </p>\r\n                  </td>\r\n                  <td className=\"tableitem\">\r\n                    <p className=\"itemtext text-right\">\r\n                      {item?.price\r\n                        ? moneyFormater(item?.price * item?.quantity - item?.total_discount)\r\n                        : ''}\r\n                    </p>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n\r\n              <tr className=\"tabletitle foot\">\r\n                <td style={{ paddingTop: 16 }}></td>\r\n                <td style={{ paddingTop: 16 }}></td>\r\n                <td style={{ paddingTop: 16 }}></td>\r\n                <td className=\"Rate\" style={{ paddingTop: 16 }}>\r\n                  <p className=\"text-right\">Sub Total</p>\r\n                </td>\r\n                <td className=\"payment\" style={{ paddingTop: 16 }}>\r\n                  <p className=\"text-right\">\r\n                    {data?.order?.subtotal_without_discount\r\n                      ? moneyFormater(data?.order?.subtotal_without_discount)\r\n                      : ''}\r\n                  </p>\r\n                </td>\r\n              </tr>\r\n\r\n              {data?.order?.current_total_discounts ? (\r\n                <tr className=\"tabletitle foot\">\r\n                  <td style={{ paddingTop: 16 }}></td>\r\n                  <td style={{ paddingTop: 16 }}></td>\r\n                  <td style={{ paddingTop: 16 }}></td>\r\n                  {data?.order?.discount_codes?.length ? (\r\n                    <td className=\"Rate\" style={{ paddingTop: 16 }}>\r\n                      <p className=\"text-right\">Discount:</p>\r\n                    </td>\r\n                  ) : (\r\n                    <td style={{ paddingTop: 16 }}></td>\r\n                  )}\r\n                  <td className=\"payment\" style={{ paddingTop: 16 }}>\r\n                    <p className=\"text-right\">\r\n                      {data?.order?.discount_codes?.length\r\n                        ? '- ' + moneyFormater(data?.order?.discount_codes[0].amount)\r\n                        : ''}\r\n                    </p>\r\n                  </td>\r\n                </tr>\r\n              ) : null}\r\n\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                {/* <td className=\"Rate\">\r\n                  <p className=\"text-right\">Price discounted</p>\r\n                </td> */}\r\n                {/* <td className=\"payment\">\r\n                  <p className=\"text-right\">\r\n                    <span style={{ fontWeight: 'bold' }}>-</span>\r\n                    {data?.order?.total_discounts\r\n                      ? moneyFormater(data?.order?.total_discounts)\r\n                      : ''}\r\n                  </p>\r\n                </td> */}\r\n              </tr>\r\n\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">\r\n                    VAT (5%)\r\n                    {/* {data?.order?.tax_lines && data?.order?.tax_lines.length > 0\r\n                      ? data?.order?.tax_lines[0].rate * 100 + '%'\r\n                      : ''} */}\r\n                  </p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">\r\n                    {data?.order?.total_tax ? moneyFormater(data?.order?.total_tax) : ''}\r\n                  </p>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">SHIPPING FEE</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">\r\n                    {data?.order?.total_shipping &&\r\n                    parseFloat(data?.order?.total_shipping) > 0 ? (\r\n                      <span>{moneyFormater(data?.order?.total_shipping)}</span>\r\n                    ) : (\r\n                      <span className=\"free-shipping\">FREE</span>\r\n                    )}\r\n                  </p>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">Total</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">\r\n                    {data?.order?.current_total_price\r\n                      ? moneyFormater(data?.order?.current_total_price)\r\n                      : ''}\r\n                  </p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">Number of items sold</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">{totalQuantity ? totalQuantity : ''}</p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">Cash</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">-</p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">MTB</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">-</p>\r\n                </td>\r\n              </tr>\r\n              <tr className=\"tabletitle foot\">\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td className=\"Rate\">\r\n                  <p className=\"text-right\">Change Amount</p>\r\n                </td>\r\n                <td className=\"payment\">\r\n                  <p className=\"text-right\">-</p>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div className=\"inf-foot\">\r\n        <p>\r\n          If you are not completely satisfied with your Sundora purchases. you may return the\r\n          merchandise with your receipt and the original form of payment. We will be glad to\r\n          credit you in the same form of payment with which your purchase was made when you\r\n          return your item within 7 days of the purchase date. <br /> <br /> Sundora shall not\r\n          accept returns without a receipt or where the product has been opened/damaged in any\r\n          way.\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\nexport default ReceiptPage;\r\n"],"sourceRoot":""}