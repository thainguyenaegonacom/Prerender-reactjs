{"version":3,"sources":["images/block-countdown/right-bg-countdown-x.webp","images/block-countdown/right-bg-countdown-y.webp","components/BlockCountDown/index.tsx"],"names":["BlockCountDown","data","timestamp","useState","time","setTime","history","useHistory","useEffect","final_date","finalDate","today","moment","Date","format","dateRest","isSameOrBefore","now","hoursleft","getHours","minutesleft","getMinutes","secondsleft","getSeconds","hours","minutes","seconds","beforeMidnight","intervalId","setInterval","convertToSeconds","clearInterval","countDown","c_seconds","prevState","className","image","Picture","product","images","url","text","name","brand","moneyFormater","product_variants","price","nof_items","onClick","push","brand_page","page_ptr","handle","directDetailProduct","id","src","isMobile","bgCountdownY","bgCountdownX","loading","memo"],"mappings":"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","file":"static/js/7.440db934.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/right-bg-countdown-x.2ce029d2.webp\";","export default __webpack_public_path__ + \"static/media/right-bg-countdown-y.b02c1fcc.webp\";","import React, { useState, useEffect, memo } from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { useHistory } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport Picture from '../Picture';\r\nimport { moneyFormater } from '../../redux/Helpers';\r\nimport bgCountdownX from '../../images/block-countdown/right-bg-countdown-x.webp';\r\nimport bgCountdownY from '../../images/block-countdown/right-bg-countdown-y.webp';\r\nimport { isMobile } from '../../DetectScreen';\r\n\r\nfunction BlockCountDown({ data = {}, timestamp = '' }: { data: any; timestamp: any }) {\r\n  const [time, setTime] = useState<any>();\r\n  const history = useHistory();\r\n  const directDetailProduct = (data: any) => {\r\n    history.push('/brand/' + data?.brand_page?.page_ptr.handle + '/' + data?.handle);\r\n  };\r\n  const beforeMidnight = (finalDate: any) => {\r\n    const today = moment(new Date(timestamp)).format('YYYY-MM-DD');\r\n    const dateRest = moment(finalDate, 'YYYY-MM-DD').format('YYYY-MM-DD');\r\n\r\n    const isBeforeDate = moment(today).isSameOrBefore(dateRest);\r\n    if (isBeforeDate) {\r\n      const now = new Date(timestamp);\r\n      const hoursleft = 23 - now.getHours();\r\n      let minutesleft = 59 - now.getMinutes();\r\n      let secondsleft = 59 - now.getSeconds();\r\n\r\n      //format 0 prefixes\r\n      if (minutesleft < 10) minutesleft = 0 + minutesleft;\r\n      if (secondsleft < 10) secondsleft = 0 + secondsleft;\r\n\r\n      setTime({\r\n        hours: hoursleft,\r\n        minutes: minutesleft,\r\n        seconds: secondsleft,\r\n      });\r\n    } else {\r\n      setTime({\r\n        hours: 0,\r\n        minutes: 0,\r\n        seconds: 0,\r\n      });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    data.final_date ? beforeMidnight(data.final_date) : '';\r\n  }, [data]);\r\n  useEffect(() => {\r\n    if (!time) return;\r\n\r\n    const intervalId = setInterval(() => {\r\n      const c_seconds = convertToSeconds(time.hours, time.minutes, time.seconds);\r\n      c_seconds <= 0 ? clearInterval(intervalId) : countDown();\r\n    }, 1000);\r\n\r\n    // clear interval on re-render to avoid memory leaks\r\n    return () => clearInterval(intervalId);\r\n  }, [time]);\r\n\r\n  const convertToSeconds = (hours: any, minutes: any, seconds: any) => {\r\n    return seconds + minutes * 60 + hours * 60 * 60;\r\n  };\r\n\r\n  const countDown = () => {\r\n    const c_seconds = convertToSeconds(time.hours, time.minutes, time.seconds);\r\n    if (c_seconds) {\r\n      // seconds change\r\n      time.seconds > 0\r\n        ? setTime((prevState: any) => ({\r\n            ...prevState,\r\n            seconds: prevState.seconds - 1,\r\n          }))\r\n        : setTime((prevState: any) => ({\r\n            ...prevState,\r\n            seconds: 59,\r\n          }));\r\n\r\n      // minutes change\r\n      if (c_seconds % 60 === 0 && time.minutes) {\r\n        setTime((prevState: any) => ({\r\n          ...prevState,\r\n          minutes: prevState.minutes - 1,\r\n        }));\r\n      }\r\n\r\n      if (!time.minutes && time.hours) {\r\n        setTime((prevState: any) => ({\r\n          ...prevState,\r\n          minutes: 59,\r\n        }));\r\n      }\r\n\r\n      // hours change\r\n      if (c_seconds % 3600 === 0 && time.hours) {\r\n        setTime((prevState: any) => ({\r\n          ...prevState,\r\n          hours: prevState.hours - 1,\r\n        }));\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <section className=\"blk-countdown\">\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3 col-12 p-0\">\r\n            <div className=\"section-square\">\r\n              {data?.image ? (\r\n                <div className=\"bg-image\">\r\n                  <Picture data={data?.image} />\r\n                </div>\r\n              ) : (\r\n                ''\r\n              )}\r\n              <div className=\"product-image\">\r\n                <Picture data={data?.product?.images[0]?.url} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-9 col-12 p-0\">\r\n            <div className=\"wrapper-content\">\r\n              <div className=\"info\">\r\n                <p>{data?.text}</p>\r\n                <h2>{data?.product?.name}</h2>\r\n                <p>{data?.product?.brand?.name}</p>\r\n                <p>\r\n                  <span className=\"price\">\r\n                    {moneyFormater(data?.product?.product_variants[0]?.price)}\r\n                  </span>{' '}\r\n                  {/* / {data?.product?.product_variants[0]?.title} */}\r\n                </p>\r\n              </div>\r\n              <div className=\"countdown-box\">\r\n                <h3>\r\n                  {data?.nof_items} <span>left</span>\r\n                </h3>\r\n                {/* to={data?.product?.id ? 'product/' + data?.product?.id : '/'}  */}\r\n                <button onClick={() => directDetailProduct(data?.product)}>\r\n                  Get your now\r\n                </button>\r\n                <div className=\"time-group\">\r\n                  <ul>\r\n                    <li>\r\n                      <p id=\"hours\">{time?.hours}</p>Hrs\r\n                    </li>\r\n                    :\r\n                    <li>\r\n                      <p id=\"minutes\">{time?.minutes}</p>Mins\r\n                    </li>\r\n                    :\r\n                    <li>\r\n                      <p id=\"seconds\">{time?.seconds}</p>Secs\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <img\r\n                className=\"right-bg\"\r\n                src={isMobile ? bgCountdownY : bgCountdownX}\r\n                loading=\"lazy\"\r\n              ></img>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n// BlockCountDown.propTypes = {\r\n//   item: PropTypes.object,\r\n// };\r\n\r\nexport default memo(BlockCountDown);\r\n"],"sourceRoot":""}